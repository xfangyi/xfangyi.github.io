<!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicon.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicon.ico?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="linux,"><meta name="description" content="系统启动和内核管理Linux组成&amp;hearts;  Linux: kernel+rootfs  kernel: 进程管理、内存管理、网络管理、驱动程序、文件系统、安全功能 rootfs:程序和glibc 库：函数集合, function, 调用接口（头文件负责描述）&amp;diams;  过程调用：procedure，无返回值&amp;diams;  函数调用：function 程序：二进制执行文件  &amp;hea"><meta name="keywords" content="linux"><meta property="og:type" content="article"><meta property="og:title" content="系统启动和内核管理"><meta property="og:url" content="http://yoursite.com/2018/09/08/系统启动和内核管理/index.html"><meta property="og:site_name" content="熊凡懿的博客"><meta property="og:description" content="系统启动和内核管理Linux组成&amp;hearts;  Linux: kernel+rootfs  kernel: 进程管理、内存管理、网络管理、驱动程序、文件系统、安全功能 rootfs:程序和glibc 库：函数集合, function, 调用接口（头文件负责描述）&amp;diams;  过程调用：procedure，无返回值&amp;diams;  函数调用：function 程序：二进制执行文件  &amp;hea"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/23.png"><meta property="og:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/1.png"><meta property="og:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/2.png"><meta property="og:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/3.png"><meta property="og:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/4.png"><meta property="og:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/5.png"><meta property="og:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/22.png"><meta property="og:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/8.png"><meta property="og:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/9.png"><meta property="og:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/22.png"><meta property="og:updated_time" content="2018-09-19T13:32:53.962Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="系统启动和内核管理"><meta name="twitter:description" content="系统启动和内核管理Linux组成&amp;hearts;  Linux: kernel+rootfs  kernel: 进程管理、内存管理、网络管理、驱动程序、文件系统、安全功能 rootfs:程序和glibc 库：函数集合, function, 调用接口（头文件负责描述）&amp;diams;  过程调用：procedure，无返回值&amp;diams;  函数调用：function 程序：二进制执行文件  &amp;hea"><meta name="twitter:image" content="http://yoursite.com/2018/09/08/系统启动和内核管理/23.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!0,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://yoursite.com/2018/09/08/系统启动和内核管理/"><title>系统启动和内核管理 | 熊凡懿的博客</title><script>
class Circle {
    //创建对象
    //以一个圆为对象
    //设置随机的 x，y坐标，r半径，_mx，_my移动的距离
    //this.r是创建圆的半径，参数越大半径越大
    //this._mx,this._my是移动的距离，参数越大移动
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.r = Math.random() * 10 ;
        this._mx = Math.random() ;
        this._my = Math.random() ;

    }

    //canvas 画圆和画直线
    //画圆就是正常的用canvas画一个圆
    //画直线是两个圆连线，为了避免直线过多，给圆圈距离设置了一个值，距离很远的圆圈，就不做连线处理
    drawCircle(ctx) {
        ctx.beginPath();
        //arc() 方法使用一个中心点和半径，为一个画布的当前子路径添加一条弧。
        ctx.arc(this.x, this.y, this.r, 0, 360)
        ctx.closePath();
        ctx.fillStyle = 'rgba(204, 204, 204, 0.3)';
        ctx.fill();
    }

    drawLine(ctx, _circle) {
        let dx = this.x - _circle.x;
        let dy = this.y - _circle.y;
        let d = Math.sqrt(dx * dx + dy * dy)
        if (d < 150) {
            ctx.beginPath();
            //开始一条路径，移动到位置 this.x,this.y。创建到达位置 _circle.x,_circle.y 的一条线：
            ctx.moveTo(this.x, this.y);   //起始点
            ctx.lineTo(_circle.x, _circle.y);   //终点
            ctx.closePath();
            ctx.strokeStyle = 'rgba(204, 204, 204, 0.3)';
            ctx.stroke();
        }
    }

    // 圆圈移动
    // 圆圈移动的距离必须在屏幕范围内
    move(w, h) {
        this._mx = (this.x < w && this.x > 0) ? this._mx : (-this._mx);
        this._my = (this.y < h && this.y > 0) ? this._my : (-this._my);
        this.x += this._mx / 2;
        this.y += this._my / 2;
    }
}
//鼠标点画圆闪烁变动
class currentCirle extends Circle {
    constructor(x, y) {
        super(x, y)
    }

    drawCircle(ctx) {
        ctx.beginPath();
        //注释内容为鼠标焦点的地方圆圈半径变化
        //this.r = (this.r < 14 && this.r > 1) ? this.r + (Math.random() * 2 - 1) : 2;
        this.r = 8;
        ctx.arc(this.x, this.y, this.r, 0, 360);
        ctx.closePath();
        //ctx.fillStyle = 'rgba(0,0,0,' + (parseInt(Math.random() * 100) / 100) + ')'
        ctx.fillStyle = 'rgba(255, 77, 54, 0.3)'
        ctx.fill();

    }
}
//更新页面用requestAnimationFrame替代setTimeout
window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;

let canvas = document.getElementById('canvas');
let ctx = canvas.getContext('2d');
let w = canvas.width = canvas.offsetWidth;
let h = canvas.height = canvas.offsetHeight;
let circles = [];
let current_circle = new currentCirle(0, 0)

let draw = function () {
    ctx.clearRect(0, 0, w, h);
    for (let i = 0; i < circles.length; i++) {
        circles[i].move(w, h);
        circles[i].drawCircle(ctx);
        for (j = i + 1; j < circles.length; j++) {
            circles[i].drawLine(ctx, circles[j])
        }
    }
    if (current_circle.x) {
        current_circle.drawCircle(ctx);
        for (var k = 1; k < circles.length; k++) {
            current_circle.drawLine(ctx, circles[k])
        }
    }
    requestAnimationFrame(draw)
}

let init = function (num) {
    for (var i = 0; i < num; i++) {
        circles.push(new Circle(Math.random() * w, Math.random() * h));
    }
    draw();
}
window.addEventListener('load', init(60));
window.onmousemove = function (e) {
    e = e || window.event;
    current_circle.x = e.clientX;
    current_circle.y = e.clientY;
}
window.onmouseout = function () {
    current_circle.x = null;
    current_circle.y = null;

};
</script></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div> <a href="https://github.com/xfangyi"><img style="position:absolute;top:0;left:0;border:0" src="https://s3.amazonaws.com/github/ribbons/forkme_left_gray_6d6d6d.png" alt="Fork me on GitHub"></a><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">熊凡懿的博客</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">学无止尽、一直在路上</p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-linux"><a href="/categories/linux/" rel="section"><i class="menu-item-icon fa fa-fw fa-linux"></i><br> linux基础篇</a></li><li class="menu-item menu-item-linuxshell"><a href="/categories/linuxshell/" rel="section"><i class="menu-item-icon fa fa-fw fa-linux"></i><br> shell编程篇</a></li><li class="menu-item menu-item-linuxapp"><a href="/categories/linuxapp/" rel="section"><i class="menu-item-icon fa fa-fw fa-linux"></i><br> linux应用篇</a></li><li class="menu-item menu-item-linuxweb"><a href="/categories/linuxweb/" rel="section"><i class="menu-item-icon fa fa-fw fa-internet-explorer"></i><br> Web服务篇</a></li><li class="menu-item menu-item-sql"><a href="/categories/sql/" rel="section"><i class="menu-item-icon fa fa-fw fa-database"></i><br> 数据库技术</a></li><li class="menu-item menu-item-haproxy"><a href="/categories/haproxy/" rel="section"><i class="menu-item-icon fa fa-fw fa-h-square"></i><br> 负载匀衡</a></li><li class="menu-item menu-item-cache"><a href="/categories/cache/" rel="section"><i class="menu-item-icon fa fa-fw fa-umbrella"></i><br> 缓存技术</a></li><li class="menu-item menu-item-puppet"><a href="/categories/puppet/" rel="section"><i class="menu-item-icon fa fa-fw fa-heart"></i><br> 自动化运维</a></li><li class="menu-item menu-item-docker"><a href="/categories/docker/" rel="section"><i class="menu-item-icon fa fa-fw fa-cloud"></i><br> 容器技术</a></li><li class="menu-item menu-item-monitor"><a href="/categories/monitor/" rel="section"><i class="menu-item-icon fa fa-fw fa-eye"></i><br> 监控技术</a></li><li class="menu-item menu-item-python"><a href="/categories/python/" rel="section"><i class="menu-item-icon fa fa-fw fa-fighter-jet"></i><br> python学习</a></li><li class="menu-item menu-item-essays"><a href="/categories/essays/" rel="section"><i class="menu-item-icon fa fa-fw fa-globe"></i><br> 随笔</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/08/系统启动和内核管理/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="X Fan Yi"><meta itemprop="description" content=""><meta itemprop="image" content="/uploads/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="熊凡懿的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">系统启动和内核管理</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-08T08:38:36+08:00">2018-09-08</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span></span> <span id="/2018/09/08/系统启动和内核管理/" class="leancloud_visitors" data-flag-title="系统启动和内核管理"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">热度&#58;</span><span class="leancloud-visitors-count"></span></span> <span>100℃</span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">2.8k 字</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">11 分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><h3 id="系统启动和内核管理"><a href="#系统启动和内核管理" class="headerlink" title="系统启动和内核管理"></a>系统启动和内核管理</h3><h4 id="Linux组成"><a href="#Linux组成" class="headerlink" title="Linux组成"></a>Linux组成</h4><p>&hearts; Linux: kernel+rootfs</p><ul><li>kernel: 进程管理、内存管理、网络管理、驱动程序、文件系统、安全功能</li><li>rootfs:程序和glibc</li><li>库：函数集合, function, 调用接口（头文件负责描述）<br>&diams; 过程调用：procedure，无返回值<br>&diams; 函数调用：function</li><li>程序：二进制执行文件</li></ul><p>&hearts; 内核设计流派：</p><ul><li>单内核(monolithic kernel)：Linux<br>&diams; 把所有功能集成于同一个程序</li><li>微内核(micro kernel)：Windows, Solaris<br>&diams; 每种功能使用一个单独子系统实现</li></ul><h5 id="内核"><a href="#内核" class="headerlink" title="内核"></a>内核</h5><p>&hearts; Linux内核特点：</p><ul><li>支持模块化：.ko（内核对象）<br>&diams; 如：文件系统，硬件驱动，网络协议等<br>&diams; 支持内核模块的动态装载和卸载</li></ul><p>&hearts; 组成部分：</p><ul><li>核心文件：/boot/vmlinuz-VERSION-release<br>&diams; ramdisk：辅助的伪根系统<br>&diams; CentOS 5: /boot/initrd-VERSION-release.img<br>&diams; CentOS 6,7: /boot/initramfs-VERSION-release.img</li><li>模块文件：/lib/modules/VERSION-release<a id="more"></a><h3 id="CentOS6启动流程"><a href="#CentOS6启动流程" class="headerlink" title="CentOS6启动流程"></a>CentOS6启动流程</h3></li></ul><h4 id="总体流程"><a href="#总体流程" class="headerlink" title="总体流程"></a>总体流程</h4><ol><li>Power On 加载BIOS的硬件信息，获取第一个启动设备</li><li>读取第一个启动设备MBR的引导加载程序(grub)的启动信息</li><li>加载核心操作系统的核心信息，核心开始解压缩，并尝试驱动所有的硬件设备</li><li>核心执行init程序，并获取默认的运行信息</li><li>init程序执行/etc/rc.d/rc.sysinit文件</li><li>启动核心的外挂模块</li><li>init执行运行的各个批处理文件(scripts)</li><li>init执行/etc/rc.d/rc.local</li><li>执行/bin/login程序，等待用户登录</li><li>登录之后开始以Shell控制主机</li></ol><h4 id="第一阶段"><a href="#第一阶段" class="headerlink" title="第一阶段"></a>第一阶段</h4><p>&hearts; POST：Power-On-Self-Test，加电自检，是BIOS功能的一个主要部分。<br>负责完成对CPU、主板、内存、硬盘子系统、显示子系统、串并行接口、键盘等硬件情况的检测</p><ul><li>ROM：BIOS，Basic Input and Output System，保存着有关计算机系统最重要<br>的基本输入输出程序，系统信息设置、开机加电自检程序和系统启动自举程序等</li><li>RAM：CMOS互补金属氧化物半导体，保存各项参数的设定按次序查找引导设备，第一个有引导程序的设备为本次启动设备</li></ul><p>&hearts; bootloader: 引导加载器，引导程序</p><ul><li>windows: ntloader，仅是启动OS</li><li>Linux：功能丰富，提供菜单，允许用户选择要启动系统或不同的内核版本；把用<br>户选定的内核装载到内存中的特定空间中，解压、展开，并把系统控制权移交给内核<br> &diams; LILO：LInux LOader<br> &diams; GRUB: GRand Unified Bootloader GRUB 0.X: GRUB Legacy， GRUB2</li></ul><h4 id="第二阶段"><a href="#第二阶段" class="headerlink" title="第二阶段"></a>第二阶段</h4><p>&hearts; 加载MBR</p><ul><li>MBR：446: bootloader, 64: 分区表, 2: 55AA</li><li>GRUB: primary boot loader : 1st stage，1.5 stage secondary boot loader ：2nd stage，分区文件</li></ul><h4 id="第三阶段"><a href="#第三阶段" class="headerlink" title="第三阶段"></a>第三阶段</h4><p>&hearts; kernel：自身初始化</p><ul><li>探测可识别到的所有硬件设备</li><li>加载硬件驱动程序（借助于ramdisk加载驱动）</li><li>以只读方式挂载根文件系统</li><li>运行用户空间的第一个应用程序：/sbin/init</li></ul><p>&hearts; ramdisk：内核中的特性之一：使用缓冲和缓存来加速对磁盘上的文件访问，并加载相应的硬件驱动</p><ul><li>ramdisk –&gt; ramfs 提高速度<br>&diams; CentOS 5: initrd 工具程序：mkinitrd<br>&diams; CentOS 6，7: initramfs 工具程序：mkinitrd, dracut</li></ul><p>&hearts; 系统初始化：</p><ul><li>POST –&gt; BootSequence (BIOS) –&gt; Bootloader(MBR) –&gt;kernel(ramdisk) –&gt; rootfs(只读) –&gt; init（systemd）</li></ul><p>&hearts; ramdisk文件的制作：</p><ul><li>mkinitrd命令:为当前正在使用的内核重新制作ramdisk文件 mkinitrd /boot/initramfs-$(uname -r).img $(uname -r)</li><li>dracut命令、为当前正在使用的内核重新制作ramdisk文件 dracut /boot/initramfs-$(uname -r).img $(uname -r)</li></ul><h4 id="第四阶段"><a href="#第四阶段" class="headerlink" title="第四阶段"></a>第四阶段</h4><p>&hearts; init程序的类型：SysV: init, CentOS 5之前</p><ul><li>配置文件：/etc/inittab<br>&diams; Upstart: init,CentOS 6<br> 配置文件：/etc/inittab, /etc/init/*.conf</li><li>Systemd：systemd, CentOS 7<br>&diams; 配置文件：/usr/lib/systemd/system /etc/systemd/system</li></ul><p>&hearts; /sbin/init CentOS6之前</p><ul><li>运行级别：为系统运行或维护等目的而设定；0-6：7个级别<br>&diams; 0：关机<br>&diams; 1：单用户模式(root自动登录), single, 维护模式<br>&diams; 2: 多用户模式，启动网络功能，但不会启动NFS；维护模式<br>&diams; 3：多用户模式，正常模式；文本界面<br>&diams; 4：预留级别；可同3级别<br>&diams; 5：多用户模式，正常模式；图形界面<br>&diams; 6：重启</li><li>默认级别：3, 5</li><li>切换级别：init #</li><li>查看级别：runlevel ; who -r</li></ul><p>&hearts; init读取其初始化文件：/etc/inittab</p><ul><li>初始运行级别(RUN LEVEL)</li><li>系统初始化脚本</li><li>对应运行级别的脚本目录</li><li>捕获某个关键字顺序</li><li>定义UPS电源终端/恢复脚本</li><li>在虚拟控制台生成getty</li><li>在运行级别5初始化X</li></ul><p>&hearts; 配置文件：/etc/inittab</p><ul><li>每一行格式： id:runlevel:action:process<br>&diams; id：是惟一标识该项的字符序列<br>&diams; runlevels： 定义了操作所使用的运行级别<br>&diams; 定义了要执行的进程<br>&diams; action： 指定了要执行的特定操作<br> &raquo; wait: 切换至此级别运行一次<br> &raquo; respawn：此process终止，就重新启动之<br> &raquo; initdefault：设定默认运行级别；process省<br> &raquo; sysinit：设定系统初始化方式</li><li>示例：<br>&diams; id:3:initdefault:<br>&diams; si::sysinit:/etc/rc.d/rc.sysinit<br>&diams; l0:0:wait:/etc/rc.d/rc 0<br>&diams; l1:1:wait:/etc/rc.d/rc 1…<br>&diams; l6:6:wait:/etc/rc.d/rc 6<br>&diams; ca::ctrlaltdel:/sbin/shutdown -t3 -r now</li></ul><h4 id="第五阶段"><a href="#第五阶段" class="headerlink" title="第五阶段"></a>第五阶段</h4><p>&hearts; init程序执行/etc/rc.d/rc.sysinit文件</p><ul><li>设置主机名</li><li>设置欢迎信息</li><li>激活udev和selinux</li><li>挂载/etc/fstab文件中定义的文件系统</li><li>检测根文件系统，并以读写方式重新挂载根文件系统</li><li>设置系统时钟</li><li>激活swap设备</li><li>根据/etc/sysctl.conf文件设置内核参数</li><li>激活lvm及software raid设备</li><li>加载额外设备的驱动程序</li><li>清理操作</li></ul><h4 id="第六阶段"><a href="#第六阶段" class="headerlink" title="第六阶段"></a>第六阶段</h4><p>&hearts; init执行运行的各个批处理文件(scripts)</p><ul><li>关闭或启动对应级别的服务</li></ul><h4 id="第七阶段"><a href="#第七阶段" class="headerlink" title="第七阶段"></a>第七阶段</h4><p>&hearts; init执行/etc/rc.d/rc.local （源码安装的启动程序可以放在此处）</p><h4 id="第八阶段"><a href="#第八阶段" class="headerlink" title="第八阶段"></a>第八阶段</h4><p>&hearts; 设置登录终端</p><h4 id="各阶段故障处理"><a href="#各阶段故障处理" class="headerlink" title="各阶段故障处理"></a>各阶段故障处理</h4><h5 id="grub配置文件详解"><a href="#grub配置文件详解" class="headerlink" title="grub配置文件详解"></a>grub配置文件详解</h5><p>&hearts; grub.conf</p><ul><li>示图如下<br><img src="/2018/09/08/系统启动和内核管理/23.png" alt="jpeg"></li></ul><p>&hearts; 选项参数如下</p><ul><li>示图如下<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">default=<span class="comment">#:       设定默认启动的菜单项；落单项(title)编号从0开始 </span></span><br><span class="line">timeout=<span class="comment">#：      指定菜单项等待选项选择的时长 </span></span><br><span class="line">splashimage=     (hd<span class="comment">#,#)/PATH/XPM_FILE：菜单背景图片文件路径 </span></span><br><span class="line">password [--md5] STRING: 启动菜单编辑认证</span><br><span class="line">                  生成grub口令 </span><br><span class="line">                  grub-md5-crypt </span><br><span class="line">                  grub-crypt </span><br><span class="line">hiddenmenu：     隐藏菜单 </span><br><span class="line">title TITLE：    定义菜单项“标题”, 可出现多次</span><br><span class="line">root (hd<span class="comment">#,#)：   查找stage2及kernel文件所在设备分区；为grub的根</span></span><br><span class="line">kernel /PATH/TO/VMLINUZ_FILE [PARAMETERS]：启动的内核</span><br><span class="line">initrd /PATH/TO/INITRAMFS_FILE: 内核匹配的ramfs文件</span><br></pre></td></tr></table></figure></li></ul><h5 id="grub-1-阶段故障"><a href="#grub-1-阶段故障" class="headerlink" title="grub 1 阶段故障"></a>grub 1 阶段故障</h5><p>&hearts; 删除主引导记录MBR的前446字节</p><ul><li><p>人为操作<br>&diams; hexdump -C -n 512 /dev/sda<br>&diams; dd if=/dev/zer0 of=/dev/sda bs=1 count=446</p></li><li><p>故障现象如下<br><img src="/2018/09/08/系统启动和内核管理/1.png" alt="jpeg"></p></li></ul><p>&hearts; 修复方法</p><ul><li>bios设置光盘启动，并进入救援模式</li><li>修复如图所示<br><img src="/2018/09/08/系统启动和内核管理/2.png" alt="jpeg"></li></ul><h5 id="grub-1-5阶段故障"><a href="#grub-1-5阶段故障" class="headerlink" title="grub 1.5阶段故障"></a>grub 1.5阶段故障</h5><p>&hearts; MBR后27扇区</p><ul><li>人为操作<br>&diams; dd if=/dev/zer0 of=/dev/sda bs=1 count=12000 seek 512 (跳过分区表)</li><li>故障现象如下<br><img src="/2018/09/08/系统启动和内核管理/3.png" alt="jpeg"></li></ul><p>&hearts; 修复方法</p><ul><li>同1阶段故障修复方法一样</li></ul><h5 id="grub-2阶段故障"><a href="#grub-2阶段故障" class="headerlink" title="grub 2阶段故障"></a>grub 2阶段故障</h5><p>&hearts; 删除/boot/grub 目录</p><ul><li>故障现象如下<br><img src="/2018/09/08/系统启动和内核管理/4.png" alt="jpeg"></li></ul><p>&hearts; 修复方法</p><ul><li>第一步: 跟1 1.5阶段一样的方法</li><li>第二步：如图<br><img src="/2018/09/08/系统启动和内核管理/5.png" alt="jpeg"><br><img src="/2018/09/08/系统启动和内核管理/22.png" alt="jpeg"></li></ul><h5 id="删除-boot-分区及-etc-fstab文件修复"><a href="#删除-boot-分区及-etc-fstab文件修复" class="headerlink" title="删除/boot 分区及 etc/fstab文件修复"></a>删除/boot 分区及 etc/fstab文件修复</h5><p>&hearts; /boot 文件损坏，/etc/fstab文件损坏</p><ul><li>第一步： 救援模式，测试出根的位置并新建fstab文件<br><img src="/2018/09/08/系统启动和内核管理/8.png" alt="jpeg"></li><li>第二步： 在创建好fstab文件基础上，然后切根</li><li>第三步： 如图<br><img src="/2018/09/08/系统启动和内核管理/9.png" alt="jpeg"><br><img src="/2018/09/08/系统启动和内核管理/22.png" alt="jpeg"></li></ul><h5 id="grub通用修复方法"><a href="#grub通用修复方法" class="headerlink" title="grub通用修复方法"></a>grub通用修复方法</h5><p>&hearts; 总结</p><ul><li>光盘救援模式，查看根挂载位置<br>&diams; lsblk</li><li>切根，挂载光盘<br>&diams; chroot /mnt/sysimage<br>&diams; mount /dev/sr0 /media</li><li>强制安装内核<br>&diams; rpm -ivh /media/Pakcage/kerne- –force</li><li>安装grub<br>&diams; grub-install /dev/sda</li><li>手动创建grub目录下的 grub.conf文件</li><li>注（如有问题，先关闭防火墙，selinux)</li></ul><h3 id="Centos7-Systemed特性"><a href="#Centos7-Systemed特性" class="headerlink" title="Centos7 Systemed特性"></a>Centos7 Systemed特性</h3><h4 id="启动过程"><a href="#启动过程" class="headerlink" title="启动过程"></a>启动过程</h4><ul><li>POST –&gt; Boot Sequence –&gt; Bootloader –&gt; kernel + initramfs(initrd) –&gt; rootfs –&gt; /sbin/init</li><li>init:<br>&diams; CentOS 5: SysV init<br>&diams; CentOS 6: Upstart<br>&diams; CentOS 7: Systemd</li></ul><h4 id="Systemd作用："><a href="#Systemd作用：" class="headerlink" title="Systemd作用："></a>Systemd作用：</h4><ul><li>系统启动和服务器守护进程管理器，负责在系统启动或运行时，激活系统资源，服务器进程和其它进程</li></ul><h4 id="Systemd新特性："><a href="#Systemd新特性：" class="headerlink" title="Systemd新特性："></a>Systemd新特性：</h4><ul><li>系统引导时实现服务并行启动</li><li>按需启动守护进程</li><li>自动化的服务依赖关系管理</li><li>同时采用socket式与D-Bus总线式激活服务</li><li>系统状态快照</li><li>向后兼容sysv init脚本</li><li>systemctl命令固定不变，不可扩展</li><li>非由systemd启动的服务，systemctl无法与之通信和控制</li></ul><h4 id="Systemd类型及unit"><a href="#Systemd类型及unit" class="headerlink" title="Systemd类型及unit"></a>Systemd类型及unit</h4><ul><li>unit表示不同类型的systemd对象，通过配置文件进行标识和配置；文件中主要包含了系统服务、监听socket、保存的系统快照以及其它与init相关的信息</li><li>Systemctl –t help 查看unit类型</li><li>Service unit: 文件扩展名为.service, 用于定义系统服务</li><li>Target unit: 文件扩展名为.target，用于模拟实现运行级别</li><li>Device unit: .device, 用于定义内核识别的设备</li><li>Mount unit: .mount, 定义文件系统挂载点</li><li>Socket unit: .socket, 用于标识进程间通信用的socket文件，也可在系统启动时，延迟启动服务，实现按需启动</li><li>Snapshot unit: .snapshot, 管理系统快照</li><li>Swap unit: .swap, 用于标识swap设备</li><li>Automount unit: .automount，文件系统的自动挂载点</li><li>Path unit: .path，用于定义文件系统中的一个文件或目录使用,常用于当文件系统变化时，延迟激活服务，如：spool 目录</li></ul><h4 id="Systemd配置文件："><a href="#Systemd配置文件：" class="headerlink" title="Systemd配置文件："></a>Systemd配置文件：</h4><ul><li>/usr/lib/systemd/system:每个服务最主要的启动脚本设置，类似于之前的/etc/init.d/</li><li>/run/systemd/system：系统执行过程中所产生的服务脚本，比上面目录优先运行</li><li>/etc/systemd/system：管理员建立的执行脚本，类似于/etc/rc.d/rcN.d/Sxx类的功能，比上面目录优先运行</li></ul><h4 id="Systemd管理服务"><a href="#Systemd管理服务" class="headerlink" title="Systemd管理服务"></a>Systemd管理服务</h4><ul><li>CentOS 7: service unit 注意：能兼容早期的服务脚本</li><li>命令：systemctl COMMAND name.service</li><li>启动：service name start ==&gt; systemctl start name.service</li><li>停止：service name stop ==&gt; systemctl stop name.service</li><li>重启：service name restart ==&gt; systemctl restart name.service</li><li>状态：service name status ==&gt; systemctl status name.service</li><li>条件式重启：已启动才重启，否则不做操作</li></ul><h5 id="服务查看"><a href="#服务查看" class="headerlink" title="服务查看"></a>服务查看</h5><ul><li>列出所有服务单元<br>&diams; systemctl list-units –type=service –all</li><li>列出活动状态的所有服务单元<br>&diams; systemctl list-units –type=service</li><li>查看服务单元的启用和禁用状态<br>&diams; systemctl list-unit-files –type=service</li><li>列出失败的服务<br>&diams; systemctl –failed –type=service</li></ul><h5 id="开机启动服务"><a href="#开机启动服务" class="headerlink" title="开机启动服务"></a>开机启动服务</h5><ul><li>查看所有服务的开机自启状态：<br>&diams; chkconfig –list ==&gt; systemctl list-unit-files –type service</li><li>查看服务是否开机自启：<br>&diams; chkconfig –list | grep service ==&gt; systemctl is-enabled name.service</li><li>设置开机自动启动：<br>&diams; chkconfig on name ==&gt; systemctl enable name.service</li><li>取消开机自动启动：<br>&diams; chkconfig off name ==&gt; systemctl disable name.service</li><li>查看当前系统的运行级别<br>&diams; cat /etc/inittab ==&gt; systemctl get-default</li><li>列出该服务在哪些运行级别下启用和禁用<br>&diams; chkconfig sshd –list<br>&diams; ls /etc/systemd/system/* .wants/sshd.service</li></ul></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-heart"></i> 感谢阅读-------------</div></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'> <span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/uploads/wechatpay.png" alt="X Fan Yi 微信打赏"><p>微信打赏</p></div><div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/uploads/alipay.jpg" alt="X Fan Yi 支付宝打赏"><p>支付宝打赏</p></div></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/linux/" rel="tag"><i class="fa fa-tag"></i> linux</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/09/06/shell-练习题/" rel="next" title="shell 练习"><i class="fa fa-chevron-left"></i> shell 练习</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/2018/09/11/AWK/" rel="prev" title="AWK">AWK<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zOTg5OS8xNjQyNg=="></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/uploads/avatar.jpg" alt="X Fan Yi"><p class="site-author-name" itemprop="name">X Fan Yi</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives"><span class="site-state-item-count">26</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <span class="site-state-item-count">12</span> <span class="site-state-item-name">分类</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">12</span> <span class="site-state-item-name">标签</span></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://scholar.google.com.hk" target="_blank" title="谷歌学术"><i class="fa fa-fw fa-google-plus"></i> 谷歌学术</a></span><span class="links-of-author-item"><a href="https://www.jianshu.com/" target="_blank" title="简书"><i class="fa fa-fw fa-heartbeat"></i> 简书</a></span><span class="links-of-author-item"><a href="https://zh.wikipedia.org" target="_blank" title="维基百科"><i class="fa fa-fw fa-wikipedia-w"></i> 维基百科</a></span><span class="links-of-author-item"><a href="https://www.facebook.com/" target="_blank" title="Facebook"><i class="fa fa-fw fa-facebook"></i> Facebook</a></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#系统启动和内核管理"><span class="nav-number">1.</span> <span class="nav-text">系统启动和内核管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux组成"><span class="nav-number">1.1.</span> <span class="nav-text">Linux组成</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#内核"><span class="nav-number">1.1.1.</span> <span class="nav-text">内核</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CentOS6启动流程"><span class="nav-number">2.</span> <span class="nav-text">CentOS6启动流程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#总体流程"><span class="nav-number">2.1.</span> <span class="nav-text">总体流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第一阶段"><span class="nav-number">2.2.</span> <span class="nav-text">第一阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第二阶段"><span class="nav-number">2.3.</span> <span class="nav-text">第二阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第三阶段"><span class="nav-number">2.4.</span> <span class="nav-text">第三阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第四阶段"><span class="nav-number">2.5.</span> <span class="nav-text">第四阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第五阶段"><span class="nav-number">2.6.</span> <span class="nav-text">第五阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第六阶段"><span class="nav-number">2.7.</span> <span class="nav-text">第六阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第七阶段"><span class="nav-number">2.8.</span> <span class="nav-text">第七阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第八阶段"><span class="nav-number">2.9.</span> <span class="nav-text">第八阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#各阶段故障处理"><span class="nav-number">2.10.</span> <span class="nav-text">各阶段故障处理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#grub配置文件详解"><span class="nav-number">2.10.1.</span> <span class="nav-text">grub配置文件详解</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#grub-1-阶段故障"><span class="nav-number">2.10.2.</span> <span class="nav-text">grub 1 阶段故障</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#grub-1-5阶段故障"><span class="nav-number">2.10.3.</span> <span class="nav-text">grub 1.5阶段故障</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#grub-2阶段故障"><span class="nav-number">2.10.4.</span> <span class="nav-text">grub 2阶段故障</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除-boot-分区及-etc-fstab文件修复"><span class="nav-number">2.10.5.</span> <span class="nav-text">删除/boot 分区及 etc/fstab文件修复</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#grub通用修复方法"><span class="nav-number">2.10.6.</span> <span class="nav-text">grub通用修复方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Centos7-Systemed特性"><span class="nav-number">3.</span> <span class="nav-text">Centos7 Systemed特性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#启动过程"><span class="nav-number">3.1.</span> <span class="nav-text">启动过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Systemd作用："><span class="nav-number">3.2.</span> <span class="nav-text">Systemd作用：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Systemd新特性："><span class="nav-number">3.3.</span> <span class="nav-text">Systemd新特性：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Systemd类型及unit"><span class="nav-number">3.4.</span> <span class="nav-text">Systemd类型及unit</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Systemd配置文件："><span class="nav-number">3.5.</span> <span class="nav-text">Systemd配置文件：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Systemd管理服务"><span class="nav-number">3.6.</span> <span class="nav-text">Systemd管理服务</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#服务查看"><span class="nav-number">3.6.1.</span> <span class="nav-text">服务查看</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#开机启动服务"><span class="nav-number">3.6.2.</span> <span class="nav-text">开机启动服务</span></a></li></ol></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">X Fan Yi</span></div><div class="theme-info"><div class="powered-by"></div> <span class="post-count">博客全站共69.2k字</span></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i> 您是第<span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 位来访的小伙伴</span><span class="site-pv"><i class="fa fa-eye"></i> 总访问量<span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><div class="bg_content"><canvas id="canvas"></canvas></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&((n=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("29xnQ1C2kcwORHYYn7xsWTnS-gzGzoHsz","Rq1Gk75oRwH78BryWUL4oYzj")</script><script>function showTime(e){var t=new AV.Query(e),c=[],u=$(".leancloud_visitors");u.each(function(){c.push($(this).attr("id").trim())}),t.containedIn("url",c),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var n=0;n<e.length;n++){var o=e[n],i=o.get("url"),s=o.get("time"),r=document.getElementById(i);$(r).find(t).text(s)}for(n=0;n<c.length;n++){i=c[n],r=document.getElementById(i);var l=$(r).find(t);""==l.text()&&l.text(0)}}else u.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(i){var e=$(".leancloud_visitors"),s=e.attr("id").trim(),r=e.attr("data-flag-title").trim(),t=new AV.Query(i);t.equalTo("url",s),t.find({success:function(e){if(0<e.length){var t=e[0];t.fetchWhenSave(!0),t.increment("time"),t.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var n=new i,o=new AV.ACL;o.setPublicReadAccess(!0),o.setPublicWriteAccess(!0),n.setACL(o),n.set("title",r),n.set("url",s),n.set("time",1),n.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):1<$(".post-title-link").length&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script> undefined<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:120,height:130},mobile:{show:!1}})</script></body></html><script type="text/javascript" src="/js/src/love.js"></script>