<!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicon.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicon.ico?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="linuxshell,"><meta name="description" content="分支练习条件判断练习 编写脚本/root/bin/createuser.sh，实现如下功能：使用一个用户名做为参数，如果指定参数的用户存在，就显示其存在，否则添加之；显示添加的用户的id号等信息 12345678910111213141516171819#!/bin/bash##FileName: createuser.sh#交互输入read -t 30 -p &quot;Please enter a pa"><meta name="keywords" content="linuxshell"><meta property="og:type" content="article"><meta property="og:title" content="shell 练习"><meta property="og:url" content="https://www.xfanyi.top/2018/09/06/shell-练习题/index.html"><meta property="og:site_name" content="熊凡懿的博客"><meta property="og:description" content="分支练习条件判断练习 编写脚本/root/bin/createuser.sh，实现如下功能：使用一个用户名做为参数，如果指定参数的用户存在，就显示其存在，否则添加之；显示添加的用户的id号等信息 12345678910111213141516171819#!/bin/bash##FileName: createuser.sh#交互输入read -t 30 -p &quot;Please enter a pa"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://www.xfanyi.top/2018/09/06/shell-练习题/1.png"><meta property="og:updated_time" content="2018-10-05T14:42:15.890Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="shell 练习"><meta name="twitter:description" content="分支练习条件判断练习 编写脚本/root/bin/createuser.sh，实现如下功能：使用一个用户名做为参数，如果指定参数的用户存在，就显示其存在，否则添加之；显示添加的用户的id号等信息 12345678910111213141516171819#!/bin/bash##FileName: createuser.sh#交互输入read -t 30 -p &quot;Please enter a pa"><meta name="twitter:image" content="https://www.xfanyi.top/2018/09/06/shell-练习题/1.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!0,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://www.xfanyi.top/2018/09/06/shell-练习题/"><title>shell 练习 | 熊凡懿的博客</title><script>
class Circle {
    //创建对象
    //以一个圆为对象
    //设置随机的 x，y坐标，r半径，_mx，_my移动的距离
    //this.r是创建圆的半径，参数越大半径越大
    //this._mx,this._my是移动的距离，参数越大移动
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.r = Math.random() * 10 ;
        this._mx = Math.random() ;
        this._my = Math.random() ;

    }

    //canvas 画圆和画直线
    //画圆就是正常的用canvas画一个圆
    //画直线是两个圆连线，为了避免直线过多，给圆圈距离设置了一个值，距离很远的圆圈，就不做连线处理
    drawCircle(ctx) {
        ctx.beginPath();
        //arc() 方法使用一个中心点和半径，为一个画布的当前子路径添加一条弧。
        ctx.arc(this.x, this.y, this.r, 0, 360)
        ctx.closePath();
        ctx.fillStyle = 'rgba(204, 204, 204, 0.3)';
        ctx.fill();
    }

    drawLine(ctx, _circle) {
        let dx = this.x - _circle.x;
        let dy = this.y - _circle.y;
        let d = Math.sqrt(dx * dx + dy * dy)
        if (d < 150) {
            ctx.beginPath();
            //开始一条路径，移动到位置 this.x,this.y。创建到达位置 _circle.x,_circle.y 的一条线：
            ctx.moveTo(this.x, this.y);   //起始点
            ctx.lineTo(_circle.x, _circle.y);   //终点
            ctx.closePath();
            ctx.strokeStyle = 'rgba(204, 204, 204, 0.3)';
            ctx.stroke();
        }
    }

    // 圆圈移动
    // 圆圈移动的距离必须在屏幕范围内
    move(w, h) {
        this._mx = (this.x < w && this.x > 0) ? this._mx : (-this._mx);
        this._my = (this.y < h && this.y > 0) ? this._my : (-this._my);
        this.x += this._mx / 2;
        this.y += this._my / 2;
    }
}
//鼠标点画圆闪烁变动
class currentCirle extends Circle {
    constructor(x, y) {
        super(x, y)
    }

    drawCircle(ctx) {
        ctx.beginPath();
        //注释内容为鼠标焦点的地方圆圈半径变化
        //this.r = (this.r < 14 && this.r > 1) ? this.r + (Math.random() * 2 - 1) : 2;
        this.r = 8;
        ctx.arc(this.x, this.y, this.r, 0, 360);
        ctx.closePath();
        //ctx.fillStyle = 'rgba(0,0,0,' + (parseInt(Math.random() * 100) / 100) + ')'
        ctx.fillStyle = 'rgba(255, 77, 54, 0.3)'
        ctx.fill();

    }
}
//更新页面用requestAnimationFrame替代setTimeout
window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;

let canvas = document.getElementById('canvas');
let ctx = canvas.getContext('2d');
let w = canvas.width = canvas.offsetWidth;
let h = canvas.height = canvas.offsetHeight;
let circles = [];
let current_circle = new currentCirle(0, 0)

let draw = function () {
    ctx.clearRect(0, 0, w, h);
    for (let i = 0; i < circles.length; i++) {
        circles[i].move(w, h);
        circles[i].drawCircle(ctx);
        for (j = i + 1; j < circles.length; j++) {
            circles[i].drawLine(ctx, circles[j])
        }
    }
    if (current_circle.x) {
        current_circle.drawCircle(ctx);
        for (var k = 1; k < circles.length; k++) {
            current_circle.drawLine(ctx, circles[k])
        }
    }
    requestAnimationFrame(draw)
}

let init = function (num) {
    for (var i = 0; i < num; i++) {
        circles.push(new Circle(Math.random() * w, Math.random() * h));
    }
    draw();
}
window.addEventListener('load', init(60));
window.onmousemove = function (e) {
    e = e || window.event;
    current_circle.x = e.clientX;
    current_circle.y = e.clientY;
}
window.onmouseout = function () {
    current_circle.x = null;
    current_circle.y = null;

};
</script></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">熊凡懿的博客</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">学无止尽、一直在路上</p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-linux"><a href="/categories/linux/" rel="section"><i class="menu-item-icon fa fa-fw fa-linux"></i><br> linux基础篇</a></li><li class="menu-item menu-item-linuxshell"><a href="/categories/linuxshell/" rel="section"><i class="menu-item-icon fa fa-fw fa-linux"></i><br> shell编程篇</a></li><li class="menu-item menu-item-linuxapp"><a href="/categories/linuxapp/" rel="section"><i class="menu-item-icon fa fa-fw fa-linux"></i><br> linux应用篇</a></li><li class="menu-item menu-item-linuxweb"><a href="/categories/linuxweb/" rel="section"><i class="menu-item-icon fa fa-fw fa-internet-explorer"></i><br> Web服务篇</a></li><li class="menu-item menu-item-sql"><a href="/categories/sql/" rel="section"><i class="menu-item-icon fa fa-fw fa-database"></i><br> 数据库技术</a></li><li class="menu-item menu-item-haproxy"><a href="/categories/haproxy/" rel="section"><i class="menu-item-icon fa fa-fw fa-h-square"></i><br> 负载匀衡</a></li><li class="menu-item menu-item-cache"><a href="/categories/cache/" rel="section"><i class="menu-item-icon fa fa-fw fa-umbrella"></i><br> 缓存技术</a></li><li class="menu-item menu-item-puppet"><a href="/categories/puppet/" rel="section"><i class="menu-item-icon fa fa-fw fa-heart"></i><br> 自动化运维</a></li><li class="menu-item menu-item-docker"><a href="/categories/docker/" rel="section"><i class="menu-item-icon fa fa-fw fa-cloud"></i><br> 容器技术</a></li><li class="menu-item menu-item-monitor"><a href="/categories/monitor/" rel="section"><i class="menu-item-icon fa fa-fw fa-eye"></i><br> 监控技术</a></li><li class="menu-item menu-item-python"><a href="/categories/python/" rel="section"><i class="menu-item-icon fa fa-fw fa-fighter-jet"></i><br> python学习</a></li><li class="menu-item menu-item-essays"><a href="/categories/essays/" rel="section"><i class="menu-item-icon fa fa-fw fa-globe"></i><br> 随笔</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br> 搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.xfanyi.top/2018/09/06/shell-练习题/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="X Fan Yi"><meta itemprop="description" content=""><meta itemprop="image" content="/uploads/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="熊凡懿的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">shell 练习</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-06T21:26:17+08:00">2018-09-06</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linuxshell/" itemprop="url" rel="index"><span itemprop="name">linuxshell</span></a></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">4.4k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">22</span></div></div></header><div class="post-body" itemprop="articleBody"><h3 id="分支练习"><a href="#分支练习" class="headerlink" title="分支练习"></a>分支练习</h3><h4 id="条件判断练习"><a href="#条件判断练习" class="headerlink" title="条件判断练习"></a>条件判断练习</h4><ol><li><p>编写脚本/root/bin/createuser.sh，实现如下功能：使用一个用户名做为参<br>数，如果指定参数的用户存在，就显示其存在，否则添加之；显示添加的用户<br>的id号等信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: createuser.sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#交互输入</span></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"Please enter a parameter: "</span> num</span><br><span class="line"><span class="comment">#判断是否为空，如果为空则退出</span></span><br><span class="line">[ -z <span class="variable">$num</span> ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="string">"You enter a null value"</span> ; <span class="built_in">exit</span> 2; &#125;</span><br><span class="line"><span class="comment">#判断用户是否存在</span></span><br><span class="line">id <span class="variable">$num</span> &amp;&gt;/dev/null</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"The user you entered already exists"</span></span><br><span class="line">	<span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	useradd <span class="variable">$num</span> &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"The User <span class="variable">$num</span> id is `id <span class="variable">$num</span>`"</span></span><br></pre></td></tr></table></figure></li><li><p>编写脚本/root/bin/yesorno.sh，提示用户输入yes或no,并判断用户输入的<br>是yes还是no,或是其它信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: yesorno.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"Please enter yes or no: "</span> var</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$var</span> <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">[Yy]|[Yy][Ee][Ss])</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"You typed yes"</span></span><br><span class="line">		;;</span><br><span class="line">[Nn]|[Nn][Oo])</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"You typed no"</span></span><br><span class="line">		;;</span><br><span class="line">*)</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"You're not saying yes or no"</span></span><br><span class="line">		;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></li></ol><a id="more"></a><ol start="3"><li><p>编写脚本/root/bin/filetype.sh,判断用户输入文件路径，显示其文件类型<br>（普通，目录，链接，其它文件类型）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: filetype.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"Please enter a file path: "</span> var</span><br><span class="line"><span class="comment">#判断是否为空</span></span><br><span class="line">[ -z <span class="variable">$var</span> ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="string">"You enter a null value"</span>; <span class="built_in">exit</span> 2; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#判断是否为链接</span></span><br><span class="line"><span class="keyword">if</span> [ -h <span class="variable">$var</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You typed in a soft link"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#判断是否为文件，软链接应在文件前面判断</span></span><br><span class="line"><span class="keyword">elif</span> [ -f <span class="variable">$var</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You're typing in a file"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#判断是否为目录</span></span><br><span class="line"><span class="keyword">elif</span> [ -d <span class="variable">$var</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You enter a directory"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You are entering other types of files"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></li><li><p>编写脚本/root/bin/checkint.sh,判断用户输入的参数是否为正整数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: checkint.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"Please enter a parameter: "</span> var</span><br><span class="line"><span class="comment">#第一种方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#判断是否为空，为空则退出</span></span><br><span class="line">[ -z <span class="variable">$var</span> ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="string">"You enter a null value"</span>;<span class="built_in">exit</span> 2;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#用正则表达示匹配是否为数字</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$var</span> =~ ^[[:digit:]]+$ ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You enter a positive integer"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You're not entering a positive integer"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#第二种方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#匹配是否全为数字，如果不是全数字num的值不为0</span></span><br><span class="line">num=$(<span class="built_in">echo</span> <span class="variable">$var</span> | grep <span class="string">'[^0-9]'</span> | wc -l)</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$num</span> -ne 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You're not entering a positive integer"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You enter a positive integer"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="循环练习"><a href="#循环练习" class="headerlink" title="循环练习"></a>循环练习</h4><ol><li><p>判断/var/目录下所有文件的类型</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: var.sh</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `ls /var`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">cd</span> /var</span><br><span class="line">	<span class="keyword">if</span> [ -h <span class="variable">$i</span> ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="string">"<span class="variable">$i</span> This file is a soft link"</span></span><br><span class="line">	<span class="keyword">elif</span> [ -f <span class="variable">$i</span> ] </span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="string">"<span class="variable">$i</span> This file is a normal file"</span></span><br><span class="line">	<span class="keyword">elif</span> [ -d <span class="variable">$i</span> ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="string">"<span class="variable">$i</span> This file is a directory"</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="string">"<span class="variable">$i</span> This file is not a common file type"</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>添加10个用户user1-user10，密码为8位随机字符</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: user.sh</span></span><br><span class="line"></span><br><span class="line">[ -e /opt/user.txt ]&amp;&amp; rm -rf /opt/user.txt &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	id user<span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">	<span class="keyword">if</span> [ $? -ne 0 ] </span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		useradd user<span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">		pass=$(openssl rand -hex 4)</span><br><span class="line">		<span class="built_in">echo</span> <span class="variable">$pass</span> | passwd --stdin user<span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"user==user<span class="variable">$i</span> password is <span class="variable">$pass</span>"</span> &gt;&gt; /opt/user.txt</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"user <span class="variable">$user</span><span class="variable">$i</span> is add ok The passwd is in /opt/user.txt"</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"user<span class="variable">$i</span> User already exists"</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>/etc/rc.d/rc5.d目录下分别有多个以K开头和以S开头的文件；分别读取每个文件，<br>以K开头的输出为文件加stop，以S开头的输出为文件名加start，如K34filename stop<br>S66filename start</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: init.sh</span></span><br><span class="line"></span><br><span class="line">[ -e /etc/rc.d/rc5.d.bak ] || cp -r /etc/rc.d/rc5.d&#123;,.bak&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `ls /etc/rc5.d`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">cd</span> /etc/rc5.d</span><br><span class="line">	<span class="keyword">if</span> [[ <span class="variable">$i</span> =~ ^S ]]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		mv <span class="variable">$i</span> <span class="variable">$i</span>.start</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		mv <span class="variable">$i</span> <span class="variable">$i</span>.stop</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>编写脚本，提示输入正整数n的值，计算1+2+…+n的总和</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: sum.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"Please enter a positive integer: "</span> var</span><br><span class="line"></span><br><span class="line">[ -z <span class="variable">$var</span> ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="string">"you input is empty"</span>; <span class="built_in">exit</span> 2; &#125;</span><br><span class="line"></span><br><span class="line">sum=0</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 1 <span class="variable">$var</span>`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	sum=$((<span class="variable">$sum</span>+<span class="variable">$i</span>))</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"The sum of 1..<span class="variable">$var</span> is <span class="variable">$sum</span>"</span></span><br></pre></td></tr></table></figure></li><li><p>计算100以内所有能被3整除的整数之和</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: sum3.sh</span></span><br><span class="line"></span><br><span class="line">sum=0</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..100&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="keyword">if</span> [ $((<span class="variable">$i</span>%3)) -eq 0 ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		sum=$((<span class="variable">$sum</span>+<span class="variable">$i</span>))</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="literal">true</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"The sum of the Numbers 1..100  that are divisible by 3 sum is <span class="variable">$sum</span>"</span></span><br></pre></td></tr></table></figure></li><li><p>编写脚本，提示请输入网络地址，如192.168.0.0，判断输入的网段中主机在线状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: ip.sh</span></span><br><span class="line"><span class="comment">#交换互提示  </span></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"Please enter a segment of IP address such as: 192.168.0.0: "</span> num</span><br><span class="line"><span class="comment">#判断是否为空</span></span><br><span class="line">[ -z <span class="variable">$num</span> ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="string">"You input is empty"</span>; <span class="built_in">exit</span> 2; &#125;</span><br><span class="line"><span class="comment">#提取ip前段</span></span><br><span class="line">ip=$(<span class="built_in">echo</span> <span class="variable">$num</span> | cut -d <span class="string">"."</span> -f1,2,3)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..254&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	&#123; ping -c1 -w1 <span class="variable">$ip</span>.<span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">	<span class="keyword">if</span> [ $? -ne 0 ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"The ip <span class="variable">$ip</span>.<span class="variable">$i</span> is down"</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"The ip <span class="variable">$ip</span>.<span class="variable">$i</span> is OK"</span></span><br><span class="line">	<span class="keyword">fi</span> &#125; &amp;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#大括号的作用 并行运行可以加快速度 wait的作用 脚本执行完 直接回到操作界面不加，会卡在最后面</span></span><br><span class="line"><span class="built_in">wait</span></span><br></pre></td></tr></table></figure></li><li><p>打印九九乘法表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: 99.sh</span></span><br><span class="line"><span class="comment"># $i用来决定打印的列，$j用来打印对应的行  \c 不换行 \t 用制表符隔开</span></span><br><span class="line"><span class="comment"># 最后一个echo 用来换行</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..9&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> `seq <span class="variable">$i</span>`</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="comment">#注写先制表\t 不然对不齐</span></span><br><span class="line">		<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$i</span>*<span class="variable">$j</span>=<span class="variable">$(($i*$j)</span>) \t\c"</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">	<span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#随机颜色的99乘法表</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..9&#125;</span><br><span class="line"><span class="keyword">do</span>	</span><br><span class="line">	<span class="keyword">for</span> k <span class="keyword">in</span> `seq <span class="variable">$i</span>`</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		var=$[<span class="variable">$RANDOM</span>%6+31]</span><br><span class="line">		<span class="built_in">echo</span> -e <span class="string">"\033[5;<span class="variable">$var</span>;40m<span class="variable">$i</span>*<span class="variable">$k</span>=<span class="variable">$(($i*$k)</span>)\033[0m\t\c"</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">	<span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>在/testdir目录下创建10个html文件,文件名格式为数字N（从1到10）加随机8个字<br>母，如：1AbCdeFgH.html</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: html.sh</span></span><br><span class="line"><span class="comment">#脚本执行前，先判断目录是否存在，如果存在则进入目录，如果不存在则创建目录，并进入目录</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	[ -d /testdir ]&amp;&amp; <span class="built_in">cd</span> /testdir || &#123; mkdir /testdir ; <span class="built_in">cd</span> /testdir ;&#125;</span><br><span class="line">	name=$(openssl rand -hex 4)</span><br><span class="line">	touch <span class="variable">$i</span><span class="variable">$name</span>.html</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>打印等腰三角形</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: triangle.sh</span></span><br><span class="line"><span class="comment"># 打印等腰三角形思路  理解99乘法表的基础上</span></span><br><span class="line"><span class="comment"># 空行的个数	== $var(边数）-当前行</span></span><br><span class="line"><span class="comment"># 星的个数	== 2*n(当前行)-1</span></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"Please enter the number of sides of the triangle: "</span> var</span><br><span class="line"><span class="comment">#判断是否为空</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$var</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You enter a null value"</span></span><br><span class="line">	<span class="built_in">exit</span> 2</span><br><span class="line"><span class="comment">#判断是否为纯数字</span></span><br><span class="line"><span class="keyword">elif</span> [[ ! <span class="variable">$var</span> =~ ^[[:digit:]]+$ ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You're not entering a pure number"</span></span><br><span class="line">	<span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq <span class="variable">$var</span>`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="comment">#打印空格不换行</span></span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> `seq $[<span class="variable">$var</span>-<span class="variable">$i</span>]`</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> -n <span class="string">" "</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">	<span class="comment">#打印星加了点颜色5为颜色闪烁且不换行</span></span><br><span class="line">	<span class="keyword">for</span> k <span class="keyword">in</span> `seq $[2*<span class="variable">$i</span>-1]`</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">"\033[5;35;40m*\033[0m\c"</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">	<span class="comment">#每循环一行 换一下行</span></span><br><span class="line">	<span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="while循环练习"><a href="#while循环练习" class="headerlink" title="while循环练习"></a>while循环练习</h4><ol><li><p>编写脚本，求100以内所有正奇数之和</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: while1.sh</span></span><br><span class="line"></span><br><span class="line">sum=0</span><br><span class="line">i=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 100 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [ $((<span class="variable">$i</span>%3)) -eq 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                sum=$((<span class="variable">$sum</span>+<span class="variable">$i</span>))</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="literal">true</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">                <span class="built_in">let</span> i++</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The sum of by 3 totle is <span class="variable">$sum</span>"</span></span><br></pre></td></tr></table></figure></li><li><p>编写脚本，提示请输入网络地址，如192.168.0.0，判断输入的网段中主机<br>在线状态，并统计在线和离线主机各多少</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: ip.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"Please enter a network segment such as: 192.168.0.0 : "</span> var</span><br><span class="line"></span><br><span class="line">[ -z <span class="variable">$var</span> ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="string">"You input is empty"</span>; <span class="built_in">exit</span> 2; &#125;</span><br><span class="line">ip=$(<span class="built_in">echo</span> <span class="variable">$var</span> | cut -d<span class="string">"."</span> -f1,2,3)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$ip</span></span><br><span class="line">i=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 254 ] &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	&#123; ping -c 1 -w 1 <span class="variable">$ip</span>.<span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">	<span class="keyword">if</span> [ $? -ne 0 ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"The IP <span class="variable">$ip</span>.<span class="variable">$i</span> is down"</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"The IP <span class="variable">$ip</span>.<span class="variable">$i</span> is ok"</span></span><br><span class="line">	<span class="keyword">fi</span> &#125; &amp;</span><br><span class="line">	<span class="built_in">let</span> i++</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span></span><br></pre></td></tr></table></figure></li><li><p>编写脚本，打印九九乘法表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">i=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 9 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	j=1</span><br><span class="line">	<span class="keyword">while</span> [ <span class="variable">$j</span> -le <span class="variable">$i</span> ]</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$i</span>*<span class="variable">$j</span>=<span class="variable">$(($i*$j)</span>)\t\c"</span></span><br><span class="line">		<span class="built_in">let</span> j++</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">	<span class="built_in">echo</span></span><br><span class="line">	<span class="built_in">let</span> i++</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>编写脚本，利用变量RANDOM生成10个随机数字，输出这个10数字，并显<br>示其中的最大值和最小值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#方法一：</span></span><br><span class="line">[ -e /home/num.file ]&amp;&amp; rm -f /home/num.file</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        num=$(<span class="built_in">echo</span> <span class="variable">$RANDOM</span>)</span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$num</span> &gt;&gt; /home/num.file</span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$num</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">        max=$(cat /home/num.file | sort -nr | head -n1)</span><br><span class="line">        min=$(cat /home/num.file | sort -nr | tail -n1)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The Max is <span class="variable">$max</span> The Min is <span class="variable">$min</span>"</span></span><br><span class="line"><span class="comment">#方法二：</span></span><br><span class="line"><span class="comment">##!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: random.sh</span></span><br><span class="line"><span class="comment">#打印随机列表，不换行的作用是，把随机数跟这个提示在同一行</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"Random list: \c"</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        num=$(<span class="built_in">echo</span> <span class="variable">$RANDOM</span>)</span><br><span class="line">        <span class="comment">#第一次循环，只有一个值，即最大值、最小值一样</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$i</span> -eq 1 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                max=<span class="variable">$num</span></span><br><span class="line">                min=<span class="variable">$num</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="comment">#如果最大值都小于随机数，那把新值附于最大值</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$max</span> -lt <span class="variable">$num</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                max=<span class="variable">$num</span></span><br><span class="line">        <span class="comment">#如果最小值都大于随机数，那把新值附于最小值</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="variable">$min</span> -gt <span class="variable">$num</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                min=<span class="variable">$num</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">"<span class="variable">$num</span> \c"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">		<span class="comment">#循环中没有换行所有用echo 来换行</span></span><br><span class="line">        <span class="built_in">echo</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The Max is <span class="variable">$max</span>"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The min is <span class="variable">$min</span>"</span></span><br></pre></td></tr></table></figure></li><li><p>编写脚本，实现打印国际象棋棋盘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#脚本思路</span></span><br><span class="line"><span class="comment">#第一：先试着打印一个正方形</span></span><br><span class="line"><span class="comment">##!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 1</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> 1</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -e -n <span class="string">"\033[42m "</span> <span class="string">"\033[0m"</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#第二：一个棋盘由8个正方形成且颜色错开</span></span><br><span class="line"><span class="comment">#行为偶数与列为偶数的颜色相同</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: game.sh</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..8&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">		<span class="comment">#判断列是否为偶数</span></span><br><span class="line">        a=$((<span class="variable">$i</span>%2))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> &#123;1..8&#125;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        <span class="comment">#判断行是否为偶数</span></span><br><span class="line">        b=$((<span class="variable">$k</span>%2))</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$a</span> -eq <span class="variable">$b</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> -e -n <span class="string">"\033[42m "</span> <span class="string">"\033[0m"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">echo</span> -e -n <span class="string">"\033[46m "</span> <span class="string">"\033[0m"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>后续六个字符串：efbaf275cd、4be9c40b8b、44b2395c46、<br>f8c8873ce0、b902c16c8b、ad865d2f63是通过对随机数变量RANDOM随机<br>执行命令： echo $RANDOM|md5sum|cut –c1-10 后的结果，请破解这些<br>字符串对应的RANDOM值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#思路 先找出随机数的个数 man bash  找到RANDOM  32767 </span></span><br><span class="line"><span class="comment">##!/bin/bash</span></span><br><span class="line"><span class="comment">#判断文件是否存在，如果存在则删除</span></span><br><span class="line">[ -e /home/num.file ] &amp;&amp; rm -f /home/num.file</span><br><span class="line"><span class="comment">#看一下找完需要多少时间</span></span><br><span class="line"><span class="built_in">echo</span> `date +%T`</span><br><span class="line"><span class="comment">#key 的值也可以用 key=$(echo $i | md5sum | head -c10)</span></span><br><span class="line"><span class="comment">#加大括号是为了并行运行，加快执行结果</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..32767&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        &#123; key=$(<span class="built_in">echo</span> <span class="variable">$i</span> | md5sum| cut -c1-10)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">"<span class="variable">$key</span>"</span> == <span class="string">"efbaf275cd"</span> -o <span class="string">"<span class="variable">$key</span>"</span> == <span class="string">"4be9c40b8b"</span> -o <span class="string">"<span class="variable">$key</span>"</span> == <span class="string">"44b2395c46"</span> -o <span class="string">"<span class="variable">$key</span>"</span> == <span class="string">"f8c8873ce0"</span> -o <span class="string">"<span class="variable">$key</span>"</span> == <span class="string">"b902c16c8b"</span> -o <span class="string">"<span class="variable">$key</span>"</span> == <span class="string">"ad865d2f63"</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="variable">$i</span> &gt;&gt; /home/num.file</span><br><span class="line">        <span class="keyword">fi</span> &#125; &amp;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> `date +%T`</span><br></pre></td></tr></table></figure></li><li><p>每隔3秒钟到系统上获取已经登录的用户的信息；如果发现用户hacker登录，则将登录时间和主机记录于日志/var/log/login.log中,并退出脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#FileName: login.sh</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        who | grep <span class="string">'^hacker'</span> &amp;&gt;/dev/null</span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                user=$(who | tr -d <span class="string">"(|)"</span> | awk <span class="string">'/^hacker/&#123;print $3,$4,$5&#125;'</span>)</span><br><span class="line">                <span class="built_in">echo</span> <span class="variable">$user</span> &gt;&gt; /var/<span class="built_in">log</span>/login.log</span><br><span class="line">                <span class="built_in">exit</span> 2</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="literal">true</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        sleep 3</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>随机生成10以内的数字，实现猜字游戏，提示比较大或小，相等则退出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName: num.sh</span></span><br><span class="line"><span class="comment">#生成10以内的随机数</span></span><br><span class="line">a=$[<span class="variable">$RANDOM</span>%10]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="built_in">read</span> -t 30 -p <span class="string">"Please enter a number less than 10: "</span> num</span><br><span class="line">        <span class="comment">#如果用户输入的为空则提示用户</span></span><br><span class="line">        [ -z <span class="variable">$num</span> ]&amp;&amp; <span class="built_in">echo</span> <span class="string">"You enter a null value"</span></span><br><span class="line">        <span class="comment">#如果用户输入的不是一个纯数字 或者大于10 则提示用户</span></span><br><span class="line">        [[ ! <span class="variable">$num</span> =~ ^[[:digit:]]$ ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">"You're not entering a pure number or more than 10"</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$num</span> -gt <span class="variable">$a</span> ] &amp;&gt;/dev/null</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"The value you input is large"</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="variable">$num</span> -lt <span class="variable">$a</span> ] &amp;&gt;/dev/null</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"The value you input is small"</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="variable">$num</span> -eq <span class="variable">$a</span> ] &amp;&gt;/dev/null</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> -e <span class="string">"The value you input is equal to the value of the system \nThe system num is <span class="variable">$a</span>"</span>        </span><br><span class="line">                sleep 2</span><br><span class="line">                <span class="built_in">exit</span> 2</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>用文件名做为参数，统计所有参数文件的总行数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#FileName file.sh</span></span><br><span class="line"><span class="comment">#如果参数小于1 提示用户</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The value you input is equal to the value of the system"</span></span><br><span class="line">        <span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">sum=0</span><br><span class="line"><span class="comment">#循环输入的参数</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $*</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="comment">#如果不为文件则告知用户</span></span><br><span class="line">        <span class="keyword">if</span> [ ! -f <span class="variable">$i</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"You are not entering <span class="variable">$i</span> as a valid file path"</span></span><br><span class="line">                <span class="built_in">continue</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                line=$(cat <span class="variable">$i</span> | wc -l)</span><br><span class="line">                sum=$((<span class="variable">$line</span>+<span class="variable">$sum</span>))</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"The sum of line is <span class="variable">$sum</span>"</span></span><br></pre></td></tr></table></figure></li><li><p>用二个以上的数字为参数，显示其中的最大值和最小值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#判断参数是否大于2，如果小于2则退出</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 2 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"You should type in more than two, less than 10"</span></span><br><span class="line">        <span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> &#123;1..10&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        <span class="comment">#判断是否为数字，如果不为纯数字则跳过</span></span><br><span class="line">        <span class="keyword">if</span> [[ ! <span class="variable">$i</span> =~ ^[[:digit:]]+$ ]]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">continue</span></span><br><span class="line">        <span class="comment">#第一次循环最大值等于最小值</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="variable">$k</span> -eq 1 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                max=<span class="variable">$i</span></span><br><span class="line">                min=<span class="variable">$i</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="comment">#如果循环中最大值小于新值，则最大值重新赋值</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$max</span> -lt <span class="variable">$i</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                max=<span class="variable">$i</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="variable">$min</span> -gt <span class="variable">$i</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                min=<span class="variable">$i</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The max is <span class="variable">$max</span>"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The min is <span class="variable">$min</span>"</span></span><br></pre></td></tr></table></figure></li><li><p>扫描/etc/passwd文件每一行，如发现GECOS字段为空，则填充用户名和单位电话为62985600，并提示该用户的GECOS信息修改成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">cat  /etc/passwd | <span class="keyword">while</span> <span class="built_in">read</span> i</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        gencos=$(<span class="built_in">echo</span> <span class="variable">$i</span> | cut -d: -f5)</span><br><span class="line">        name=$(<span class="built_in">echo</span> <span class="variable">$i</span>  | cut -d: -f1)</span><br><span class="line">        <span class="keyword">if</span> [ -z <span class="variable">$gencos</span> ] &amp;&gt;/dev/null</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                chfn -f <span class="string">"<span class="variable">$name</span>"</span> -p <span class="string">"62985600"</span> <span class="variable">$name</span> &amp;&gt;/dev/null</span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"The User <span class="variable">$name</span> is change"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="literal">true</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###还原</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">cat /etc/passwd | <span class="keyword">while</span> <span class="built_in">read</span> i </span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        num=$(<span class="built_in">echo</span> <span class="variable">$i</span> | cut -d: -f5 | cut -d, -f3)</span><br><span class="line">        name=$(<span class="built_in">echo</span> <span class="variable">$i</span> | cut -d: -f1)</span><br><span class="line">        <span class="keyword">if</span> [[ <span class="variable">$num</span> =~ ^[[:digit:]]+$ ]]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                usermod -c <span class="string">""</span> <span class="variable">$name</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"The User <span class="variable">$name</span> is back"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="literal">true</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="函数练习"><a href="#函数练习" class="headerlink" title="函数练习"></a>函数练习</h4><ol><li><p>编写函数，实现OS的版本判断</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">ios</span></span>()&#123;</span><br><span class="line">        os=$(cat /etc/centos-release | sed -r  <span class="string">'s#.* ([0-9])\..*#\1#g'</span>)</span><br><span class="line">        os1=$(cat /etc/centos-release | grep -o <span class="string">"[0-9]"</span> | head -1)</span><br><span class="line">        os2=$(cat /etc/centos-release | tr -dc <span class="string">"[0-9.]"</span> | cut -d. -f1)</span><br><span class="line">        os3=$(cat /etc/centos-release | awk -F <span class="string">"[ .]+"</span> <span class="string">'&#123;print $4&#125;'</span>)</span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$os</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$os1</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$os2</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$os3</span></span><br><span class="line">&#125;</span><br><span class="line">ios</span><br></pre></td></tr></table></figure></li><li><p>编写函数，实现取出当前系统eth0的IP地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">ip</span></span>()&#123;</span><br><span class="line">        eth=$(ifconfig | grep <span class="string">'^eth0'</span> -A1 | grep <span class="string">'inet'</span> | egrep <span class="string">"[0-9.]+"</span> -o | grep -v <span class="string">"255"</span>)</span><br><span class="line">        eth1=$(ifconfig |sed -n <span class="string">'/^eth0/,/inet/p'</span> | sed -n -r <span class="string">'2s#(.*inet)(.*)(  netmask.*)#\2#gp'</span>)</span><br><span class="line">        eth2=$(ifconfig | awk <span class="string">'/^eth0/,/inet/&#123;if(NR==2)print $2&#125;'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$eth</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$eth1</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$eth2</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">ip</span><br></pre></td></tr></table></figure></li><li><p>编写函数，实现打印绿色OK和红色FAILED</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">color</span></span>()&#123;</span><br><span class="line">        ok=<span class="string">'[   OK   ]'</span></span><br><span class="line">        fail=<span class="string">'[ FAILED ]'</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">"------------------------------------------------------------\033[31;40m <span class="variable">$ok</span> \033[0m"</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">"------------------------------------------------------------\033[32;40m <span class="variable">$fail</span> \033[0m"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">color</span><br></pre></td></tr></table></figure></li><li><p>编写函数，实现判断是否无位置参数，如无参数，提示错误</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">num</span></span>()&#123;</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$#</span> -lt 1 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"Wrong"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"Ok"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line">num <span class="variable">$1</span></span><br></pre></td></tr></table></figure></li><li><p>编写服务脚本/root/bin/testsrv.sh，完成如下要求</p><ul><li>脚本可接受参数：start, stop, restart, status</li><li>如果参数非此四者之一，提示使用格式后报错退出</li><li>如是start:则创建/var/lock/subsys/SCRIPT_NAME, 并显示“启动成功”<br>&diams; 考虑：如果事先已经启动过一次，该如何处理？</li><li>如是stop:则删除/var/lock/subsys/SCRIPT_NAME, 并显示“停止完成”</li><li>如是restart，则先stop, 再start</li><li>如是status, 则如果/var/lock/subsys/SCRIPT_NAME文件存在，则显示“SCRIPT_NAME is<br>running…”</li><li>如果/var/lock/subsys/SCRIPT_NAME文件不存在，则显示“SCRIPT_NAME is stopped…”<br>其中：SCRIPT_NAME为当前脚本名</li><li>在所有模式下禁止启动该服务，可用chkconfig 和 service命令管理<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#chkconfig: - 78 66</span></span><br><span class="line"><span class="function"><span class="title">job</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">[ -z <span class="variable">$1</span> ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="string">"you should input start|stop|restart|status"</span>; <span class="built_in">exit</span> 2; &#125;</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">start)</span><br><span class="line">	<span class="keyword">if</span> [ -e /var/lock/subsys/testsrv.sh ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"httpd is running"</span></span><br><span class="line">		<span class="built_in">return</span> 2</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		touch /var/lock/subsys/testsrv.sh</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"httpd start successful "</span></span><br><span class="line">		<span class="built_in">return</span> 1</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	;;</span><br><span class="line">stop)</span><br><span class="line">	<span class="keyword">if</span> [ ! -e /var/lock/subsys/testsrv.sh ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"httpd is stopped"</span></span><br><span class="line">		<span class="built_in">return</span> 2</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		rm -f /var/lock/subsys/testsrv.sh</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"httpd stopped successfully"</span></span><br><span class="line">		<span class="built_in">return</span> 1</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	;;</span><br><span class="line"></span><br><span class="line">restart)</span><br><span class="line">	<span class="keyword">if</span> [ -e /var/lock/subsys/testsrv.sh ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		rm -f /var/lock/subsys/testsrv.sh</span><br><span class="line">		touch /var/lock/subsys/testsrv.sh</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Restart the success"</span></span><br><span class="line">		<span class="built_in">return</span> 1</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		touch /var/lock/subsys/testsrv.sh</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"httpd start is ok"</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	;;</span><br><span class="line">status)</span><br><span class="line">	<span class="keyword">if</span>	[ -e /var/lock/subsys/testsrv.sh ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"httpd is running"</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"httpd is stopped"</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	;;</span><br><span class="line">*)</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Please input start|stop|restart|status"</span></span><br><span class="line">		;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">job <span class="variable">$1</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>编写函数实现两个数字做为参数，返回最大值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">fun</span></span>()&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -ne 2 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Please enter two Numbers"</span></span><br><span class="line">        <span class="built_in">return</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> &#123;1..2&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="keyword">if</span> [[ ! <span class="string">"<span class="variable">$i</span>"</span> =~ ^[[:digit:]]+$ ]]</span><br><span class="line">                <span class="keyword">then</span></span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">"The <span class="variable">$i</span> is not a number"</span></span><br><span class="line">                        <span class="built_in">return</span> 2</span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> [ <span class="variable">$k</span> -eq 1 ]</span><br><span class="line">                <span class="keyword">then</span></span><br><span class="line">                        max=<span class="variable">$i</span></span><br><span class="line">                        min=<span class="variable">$i</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> [ <span class="variable">$i</span> -gt <span class="variable">$max</span> ]</span><br><span class="line">                <span class="keyword">then</span></span><br><span class="line">                        max=<span class="variable">$i</span></span><br><span class="line">                <span class="keyword">elif</span> [ <span class="variable">$i</span> -lt <span class="variable">$min</span> ]</span><br><span class="line">                <span class="keyword">then</span></span><br><span class="line">                        min=<span class="variable">$i</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">                <span class="keyword">done</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"The max is <span class="variable">$max</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun <span class="variable">$@</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="综合练习100"><a href="#综合练习100" class="headerlink" title="综合练习100+"></a>综合练习100+</h3><ol><li><p>电脑版石头、剪刀、布游戏</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">var=(石头 剪刀 布)</span><br><span class="line">num=$[<span class="variable">$RANDOM</span>%3]</span><br><span class="line">roto=<span class="variable">$&#123;var[$num]&#125;</span></span><br><span class="line"></span><br><span class="line">cat &lt;&lt;EFO</span><br><span class="line">number 1 :石头</span><br><span class="line">number 2 :剪刀</span><br><span class="line">number 3 :布</span><br><span class="line">EFO</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"please input you choose: "</span> var</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$var</span> <span class="keyword">in</span></span><br><span class="line">    1)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$num</span> -eq 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"平局,电脑出的是石头"</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="variable">$num</span> -eq 1 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"你赢了，电脑出的是剪刀"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"你输入了，电脑出的是布"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        ;;</span><br><span class="line">    2)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$num</span> -eq 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"你输了，电脑出的是石头"</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="variable">$num</span> -eq 1 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"平局，电脑出的是剪刀"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"你赢了，电脑出的是布"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        ;;</span><br><span class="line">    3)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$num</span> -eq 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"你赢了，电脑出的是石头"</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="variable">$num</span> -eq 1 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"你输入了，电脑出的是剪刀"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"平局，电脑出的是布"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"请输入1,2,3"</span></span><br><span class="line">        ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></li><li><p>使用egrep过渡MAC地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig | egrep -o <span class="string">"[0-9a-fA-F]&#123;2&#125;(:[0-9a-fA-F]&#123;2&#125;)&#123;5&#125;"</span></span><br></pre></td></tr></table></figure></li><li><p>打印各种时间格式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"显示星期简称"</span>（如：Sum）</span><br><span class="line"><span class="built_in">echo</span> +%a</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示星期全称"</span>（如：Sunday）</span><br><span class="line">date +%A</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示月份简称（如:oct)"</span></span><br><span class="line">date +%b</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示月份全称（如:October)"</span></span><br><span class="line">date +%B </span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示数字月份（如：10）"</span></span><br><span class="line">date +%m</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示数字日期（如：01号）"</span></span><br><span class="line">date +%d </span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示数字年全称（如:2018)"</span></span><br><span class="line">date +%Y</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示数字年简称（如：18)"</span></span><br><span class="line">date +%y</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示年-月-日"</span></span><br><span class="line">date +%F</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示小时（24小时制）"</span></span><br><span class="line">date +%H</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示分钟"</span></span><br><span class="line">date +%M</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示秒"</span></span><br><span class="line">date +%S </span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"显示纳秒"</span></span><br><span class="line">date +%N </span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"组合"</span></span><br><span class="line">date +<span class="string">"%F %T"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"7天以前"</span></span><br><span class="line">date -d <span class="string">"-7 day"</span></span><br><span class="line"></span><br><span class="line">任意一个时间戳的转换</span><br><span class="line">date -d <span class="string">"2008-08-08 20:00:00"</span> +%s</span><br><span class="line">date -d @1218196800 +<span class="string">"%F %T"</span></span><br></pre></td></tr></table></figure></li><li><p>根据计算机当前时间，返回问候语 注（00-12点为早晨，12-18点下午，18-24点为晚上）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">var=$(date +%H)</span><br><span class="line">morn=<span class="string">"Good morning <span class="variable">$user</span>"</span></span><br><span class="line">after=<span class="string">"Good afternoon <span class="variable">$user</span>"</span></span><br><span class="line">even=<span class="string">"Good evening <span class="variable">$user</span>"</span></span><br><span class="line">rand=$[<span class="variable">$RANDOM</span>%6+31]</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$var</span> -le 12 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">"\033[5;<span class="variable">$rand</span>;40m<span class="variable">$morn</span>\033[0m"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$var</span> -lt 18 -a <span class="variable">$var</span> -gt 12 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">"\033[5;<span class="variable">$rand</span>;40m<span class="variable">$after</span>\033[0m"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">"\033[5;<span class="variable">$rand</span>;40m<span class="variable">$even</span>\033[0m"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></li><li><p>使用shell脚本打印如下图形<br><img src="/2018/09/06/shell-练习题/1.png" alt="jpeg"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#图形1</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..9&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> `seq <span class="variable">$i</span>`</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -n <span class="variable">$i</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#图形2</span></span><br><span class="line"><span class="comment">##!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..5&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> `seq <span class="variable">$i</span>`</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -n <span class="string">" |"</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"_"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#图形3</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..5&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> `seq <span class="variable">$i</span>` </span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -n <span class="string">"*"</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">i=5</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -ge 1 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> `seq <span class="variable">$i</span>`</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -n <span class="string">"*"</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line">        <span class="built_in">let</span> i--</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p>显示本机linux系统上所有开放的端口列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -ntlu | awk <span class="string">'$0 !~ /Port/&#123;print $5&#125;'</span> | awk -F<span class="string">":"</span> <span class="string">'&#123;print $NF&#125;'</span>| sort | uniq</span><br></pre></td></tr></table></figure></li><li><p>读取用户输入的账户名称，将账户名写入到数组中，并提示用户按quit退出并查看用户信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">i=0</span><br><span class="line"><span class="built_in">unset</span> user</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="built_in">read</span> -t 30 -p <span class="string">"Please enter a username and quit if you want to quit and view user information: "</span> var</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> [ -z <span class="variable">$var</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"You don't input a username"</span></span><br><span class="line">                <span class="built_in">continue</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$var</span> == <span class="string">"quit"</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">break</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">        getent passwd <span class="variable">$var</span> &amp;&gt;/dev/null</span><br><span class="line">        <span class="keyword">if</span> [ $? -ne 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"The user <span class="variable">$var</span> is not exits"</span></span><br><span class="line">                <span class="built_in">continue</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                user[<span class="variable">$i</span>]=<span class="variable">$var</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="built_in">let</span> i++</span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The totle user is <span class="variable">$&#123;#user[*]&#125;</span>"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The user is <span class="variable">$&#123;user[*]&#125;</span>"</span></span><br></pre></td></tr></table></figure></li></ol></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-heart"></i> 感谢阅读-------------</div></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'> <span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/uploads/wechatpay.png" alt="X Fan Yi 微信打赏"><p>微信打赏</p></div><div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/uploads/alipay.jpg" alt="X Fan Yi 支付宝打赏"><p>支付宝打赏</p></div></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/linuxshell/" rel="tag"><i class="fa fa-tag"></i> linuxshell</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/09/06/shell脚本编程进阶/" rel="next" title="shell脚本编程进阶"><i class="fa fa-chevron-left"></i> shell脚本编程进阶</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/2018/09/08/系统启动和内核管理/" rel="prev" title="系统启动和内核管理">系统启动和内核管理<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zOTg5OS8xNjQyNg=="></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/uploads/avatar.jpg" alt="X Fan Yi"><p class="site-author-name" itemprop="name">X Fan Yi</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives"><span class="site-state-item-count">27</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <span class="site-state-item-count">12</span> <span class="site-state-item-name">分类</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">12</span> <span class="site-state-item-name">标签</span></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://scholar.google.com.hk" target="_blank" title="谷歌学术"><i class="fa fa-fw fa-google-plus"></i> 谷歌学术</a></span><span class="links-of-author-item"><a href="https://www.jianshu.com/" target="_blank" title="简书"><i class="fa fa-fw fa-heartbeat"></i> 简书</a></span><span class="links-of-author-item"><a href="https://zh.wikipedia.org" target="_blank" title="维基百科"><i class="fa fa-fw fa-wikipedia-w"></i> 维基百科</a></span><span class="links-of-author-item"><a href="https://www.facebook.com/" target="_blank" title="Facebook"><i class="fa fa-fw fa-facebook"></i> Facebook</a></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#分支练习"><span class="nav-number">1.</span> <span class="nav-text">分支练习</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#条件判断练习"><span class="nav-number">1.1.</span> <span class="nav-text">条件判断练习</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#循环练习"><span class="nav-number">1.2.</span> <span class="nav-text">循环练习</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#while循环练习"><span class="nav-number">1.3.</span> <span class="nav-text">while循环练习</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#函数练习"><span class="nav-number">1.4.</span> <span class="nav-text">函数练习</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#综合练习100"><span class="nav-number">2.</span> <span class="nav-text">综合练习100+</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">X Fan Yi</span></div><div class="theme-info"><div class="powered-by"></div> <span class="post-count">博客全站共73.6k字</span></div><p>Hosted by <a href="https://pages.coding.me" style="font-weight:700">Coding Pages</a></p><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i> 您是第<span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 位来访的小伙伴</span><span class="site-pv"><i class="fa fa-eye"></i> 总访问量<span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><div class="bg_content"><canvas id="canvas"></canvas></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&((n=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></body></html><script type="text/javascript" src="/js/src/love.js"></script>